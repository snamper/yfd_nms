webpackJsonp([8],{AcdB:function(e,t,a){var s=a("PV9a");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("FIqI")("2aacb1a4",s,!0,{})},PV9a:function(e,t,a){t=e.exports=a("UTlt")(!1),t.push([e.i,"\n",""])},s6Ha:function(e,t,a){"use strict";function s(e){a("AcdB")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("PdJF"),r=a.n(n),i=a("04Cm"),l=a("R2SV"),c=a("hyii"),o={data:function(){return{currentPage:0,detailsList:"",name:"",phone:"",radio:"1,2",pa:"",searchData:"",searchDetailsYfdData:"",searchUserId:"",searchRes:"",StaffdepartName:"",off:{showSearch:"",searchList:!1,staffDetails:!1,searchStaff:!0},form:{page:1}}},components:{staffDetails:c.a},created:function(){},methods:{search:function(e){""!=this.phone&&Object(l.checkMobile)(this.phone,function(){return!1});var t=r.a.service(options),a={},s=this;s.pa=e||1,s.currentPage=e||1,a={username:s.name,phone:s.phone,userState:s.radio,pageSize:15,pageNum:e||1},Object(i.requestMethod)(a,"/ums/w/user/userSearch").then(function(e){200==e.code?(s.off.searchList=!0,s.form.page=e.data.total,s.detailsList=e.data.users):layer.open({content:e.msg,skin:"msg",time:2,msgSkin:"error"})}).then(function(){t.close()}).catch(function(e){return Object(l.errorDeal)(e)},t.close())},getDetails:function(e){},getStaffDetails:function(e){var t={},a=this,s=r.a.service(options);t={searchUserId:e.userId,sessionType:"2"},a.searchUserId=e.userId,a.searchDetailsYfdData=t,a.StaffdepartName=e.departName,Object(i.requestMethod)(t,"/ums/w/user/getUserDetail").then(function(e){a.off.searchStaff=!1,a.off.staffDetails=!0,200==e.code&&(a.searchRes=e.data)}).then(function(){s.close()}).catch(function(e){return Object(l.errorDeal)(e)})},getDateTime:function(e){return Object(l.getDateTime)(e)}}},d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.off.searchStaff?s("div",[s("div",{staticClass:"ygcx greyFont"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content bg-purple-dark m-search-title black"},[e._v("搜索条件")])])],1),e._v(" "),s("el-row",[s("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{xs:5,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[e._v("联系人：")])]),e._v(" "),s("el-col",{attrs:{xs:19,sm:12,md:12,lg:16,xl:16}},[s("el-input",{attrs:{maxlength:10,size:"small",placeholder:"请输入查询的联系人姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1)]),e._v(" "),s("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{xs:5,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[e._v("手机号码：")])]),e._v(" "),s("el-col",{attrs:{xs:19,sm:12,md:12,lg:16,xl:16}},[s("el-input",{attrs:{maxlength:11,size:"small",placeholder:"请输入查询的手机号码"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1)])],1),e._v(" "),s("el-row",{staticClass:"marginTop"},[s("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{xs:5,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[e._v("当前状态：")])]),e._v(" "),s("el-col",{attrs:{xs:19,sm:18,md:12,lg:16,xl:16}},[s("el-radio",{attrs:{label:"1,2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("全部")]),e._v(" "),s("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("正常")]),e._v(" "),s("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("黑名单")])],1)],1)])],1),e._v(" "),s("el-row",{staticClass:"marginTop",staticStyle:{"text-align":"center"}},[s("button",{staticClass:"m-btn-orange",on:{click:function(t){e.search()}}},[e._v("搜索")])])],1),e._v(" "),e.detailsList?s("div",[s("div",[s("div",{staticClass:"m-listTitleFoot"},[s("el-row",[s("p"),s("h3",[e._v("员工列表"),s("span",{staticClass:"f-fw greyFont"},[e._v("("+e._s(e.form.page||"0")+")")])]),s("p")])],1),e._v(" "),s("div",{staticClass:"m-details"},[s("table",{staticClass:"m-searchTab",staticStyle:{width:"100%",height:"100%"}},[e._m(0),e._v(" "),e._l(e.detailsList,function(t,n){return s("tr",{key:n,class:{greyFont:3==t.departState}},[s("td",[e._v("\n                          "+e._s(15*(e.pa-1)+(n+1))+"\n                      ")]),e._v(" "),s("td",[e._v(" ")]),e._v(" "),s("td",{staticClass:"nameIcon"},[s("p",{staticStyle:{float:"left","margin-left":"36%"}},[s("span",[e._l(t.userRole,function(t,n){return s("span",{key:n},[3==t?s("img",{staticClass:"m-adminIcon",attrs:{src:a("iXw6")}}):e._e()])}),e._v("\n                                  "+e._s(t.username)+"\n                              ")],2)])]),e._v(" "),s("td",[s("a",{staticClass:"f-td-underline",on:{click:function(a){e.getStaffDetails(t)}}},[e._v(e._s(t.phone))])]),e._v(" "),s("td",[t.createTime?s("span",[e._v("\n                              "+e._s(e.getDateTime(t.caretTime)[6])+"\n                          ")]):e._e(),e._v(" "),t.createTime?e._e():s("span",[e._v("\n                              --\n                          ")])]),e._v(" "),s("td",e._l(t.userRole,function(a,n){return s("span",{key:n},[1==a?s("span",[e._v("管理员"),t.userRole.indexOf(2)>-1||t.userRole.indexOf(3)>-1||t.userRole.indexOf(4)>-1||t.userRole.indexOf(5)>-1?s("b",[e._v("、")]):e._e()]):e._e(),2==a?s("span",[t.userRole.indexOf(3)>-1||t.userRole.indexOf(4)>-1||t.userRole.indexOf(5)>-1?s("b",[e._v("、")]):e._e(),e._v("销售")]):e._e(),3==a?s("span",[e._v("店长"),t.userRole.indexOf(4)>-1||t.userRole.indexOf(5)>-1?s("b",[e._v("、")]):e._e()]):e._e(),4==a?s("span",[e._v("采购员"),t.userRole.indexOf(5)>-1?s("b",[e._v("、")]):e._e()]):e._e(),5==a?s("span",[e._v("业务员")]):e._e()])})),e._v(" "),s("td",[1==t.userState?s("span",{staticClass:"green"},[e._v("正常")]):e._e(),e._v(" "),2==t.userState?s("span",{staticClass:"greyFont"},[e._v("黑名单")]):e._e(),e._v(" "),3==t.userState?s("span",[e._v("注销")]):e._e()]),e._v(" "),s("td",[t.lastLoginTime?s("span",[e._v("\n                              "+e._s(new Date(t.lastLoginTime).toLocaleString())+"\n                          ")]):e._e(),e._v(" "),t.lastLoginTime?e._e():s("span",[e._v("\n                              --\n                          ")])])])}),e._v(" "),e.detailsList.length<=0?s("tr",[s("td",{staticClass:"f-ta-c",attrs:{colspan:"8"}},[e._v("\n                          暂无数据                                                        \n                      ")])]):e._e()],2)]),e._v(" "),e.detailsList.length>0?s("div",{staticClass:"m-listTitleFoot"},[s("el-row",[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":15,"current-page":e.currentPage,total:e.form.page},on:{"current-change":e.search,"update:currentPage":function(t){e.currentPage=t}}})],1)])],1)],1):e._e()])]):e._e()]):e._e(),e._v(" "),e.off.staffDetails?s("staffDetails",{attrs:{forms:e.searchRes}}):e._e()],1)},_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",[e._v("序号")]),e._v(" "),a("td",[e._v(" ")]),e._v(" "),a("td",{staticClass:"nameIcon"},[e._v("用户姓名")]),e._v(" "),a("td",[e._v("手机号码")]),e._v(" "),a("td",[e._v("创建时间")]),e._v(" "),a("td",[e._v("职务")]),e._v(" "),a("td",[e._v("当前状态")]),e._v(" "),a("td",[e._v("最后登录时间")])])}],v={render:d,staticRenderFns:_},u=v,f=a("Z0/y"),p=s,g=f(o,u,!1,p,"data-v-7ffe1904",null);t.default=g.exports}});