webpackJsonp([19],{V4ug:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("R2SV"),r=a("8Jld"),s=a("04Cm"),i={data:function(){return{openLayer:"number",detailsList:"",startTime:"",endTime:"",packageName:"",operator:"",phone:"",name:"",optype:"1,2,3,4",radio:"1,2",searchResult:"",pa:1,currentPage:0,off:{logDet:!1,logList:!1},form:{page:1},pickerOptionsS:{disabledDate:function(e){var t=(new Date).getTime(),a=new Date(t).getFullYear(),l=new Date(t).getMonth()+1,r=l-5,s=a;r<0&&(r+=12,s=a-1);var i=(new Date(t).getDate(),l+1),n=s+"/"+r+"/1",o=a+"/"+i+"/1",c=new Date(o)-864e5;return n=new Date(n).getTime(),e.getTime()>c||e.getTime()<n}},pickerOptionsE:{disabledDate:function(e){var t=(new Date).getTime(),a=new Date(t).getFullYear(),l=new Date(t).getMonth()+1,r=l-5,s=a;r<0&&(r+=12,s=a-1);var i=(new Date(t).getDate(),l+1),n=s+"/"+r+"/1",o=a+"/"+i+"/1",c=new Date(o)-864e5;return n=new Date(n).getTime(),e.getTime()>c||e.getTime()<n}}}},created:function(){Object(l.getTimeFunction)(this)},beforeDestroy:function(){},mounted:function(){},computed:{},components:{"log-details":r.a},methods:{search:function(e){var t=this;t.currentPage=e||1,""!=this.phone&&Object(l.checkMobile)(this.phone,function(){return t.off.logList="",t.form.page="",t.searchResult="",!1});var a=new Date(t.startTime).getFullYear(),r=new Date(t.startTime).getMonth(),i=new Date(t.endTime).getFullYear(),n=new Date(t.endTime).getMonth();if(a!=i||r!=n)return layer.open({content:"开始和结束日期不能跨月",skin:"msg",time:2,msgSkin:"error"}),!1;if(new Date(t.startTime).getTime()>new Date(t.endTime).getTime())return layer.open({content:"开始时间必须小于结束时间",skin:"msg",time:2,msgSkin:"error"}),!1;var o={startOperateTime:new Date(t.startTime).getTime(),endOperateTime:new Date(t.endTime).getTime(),operatorName:t.operator,operatorPhone:t.phone,productState:t.optype,productName:t.packageName,recordResult:t.radio,pageNum:e||1,pageSize:15};t.pa=e||1,Object(s.requestCardLogSearch)(o).then(function(e){if(200!=e.code)return t.off.logList="",t.form.page="",t.searchResult="",!1;t.off.logList=e.data.total,t.form.page=e.data.total,t.searchResult=e.data.records}).catch(function(e){return Object(l.errorDeal)(e,function(){return t.off.logList="",t.form.page="",t.searchResult="",!1})})},openDetails:function(e){var t=this,a={searchRecordId:e.recordId,searchRecordTime:e.recordTime};Object(s.requestMethod)(a,"/ors/w/record/getNumOperRecordDetail").then(function(e){200==e.code?(t.off.logDet=!0,t.detailsList=e.data):Object(l.errorDeal)(e)}).catch(function(e){return Object(l.errorDeal)(e)})},changeTimeS:function(e){var t=this,a=Object(l.disableTimeRange6)(),r=a.next,s=a.nextYesterday,i=new Date(e).getTime();i<r&&(t.startTime=r),i>s&&(t.startTime=s),Object(l.getTimeFunction)(this,[e,1])},changeTimeE:function(e){var t=this,a=Object(l.disableTimeRange6)(),r=a.next,s=a.nextYesterday,i=new Date(e).getTime();i<r&&(t.endTime=r),i>s&&(t.endTime=s),Object(l.getTimeFunction)(this,[e,2])},getDateTime:function(e){return Object(l.getDateTime)(e)}}},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"greyFont"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark m-search-title black"},[e._v("搜索条件")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{xs:24,sm:20,md:12,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-col",{attrs:{xs:4,sm:4,md:6,lg:4,xl:4}},[a("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[e._v("号包名称：")])]),e._v(" "),a("el-col",{attrs:{xs:18,sm:20,md:12,lg:16,xl:16}},[a("el-input",{attrs:{size:"small",maxlength:"20",placeholder:"请输入查询的号包名称"},model:{value:e.packageName,callback:function(t){e.packageName=t},expression:"packageName"}})],1),e._v(" "),a("el-col",{attrs:{span:2}})],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:20,md:12,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-col",{attrs:{xs:4,sm:4,md:6,lg:4,xl:4}},[a("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[e._v("操作时间：")])]),e._v(" "),a("el-col",{attrs:{xs:18,sm:20,md:12,lg:16,xl:16}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{size:"small",type:"datetime",clearable:!1,editable:!1,"picker-options":e.pickerOptionsS,placeholder:"选择开始时间"},on:{change:e.changeTimeS},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),a("el-date-picker",{attrs:{size:"small",type:"datetime",clearable:!1,editable:!1,"picker-options":e.pickerOptionsE,placeholder:"选择结束时间"},on:{change:e.changeTimeE},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)]),e._v(" "),a("el-col",{attrs:{span:2}})],1)])],1),e._v(" "),a("el-row",{staticClass:"marginTop"},[a("el-col",{attrs:{"ors:xs":"24",sm:20,md:12,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-col",{attrs:{xs:4,sm:4,md:6,lg:4,xl:4}},[a("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[e._v("操作人姓名：")])]),e._v(" "),a("el-col",{attrs:{xs:18,sm:20,md:12,lg:16,xl:16}},[a("el-input",{attrs:{size:"small",maxlength:"10",placeholder:"请输入查询的操作人姓名"},model:{value:e.operator,callback:function(t){e.operator=t},expression:"operator"}})],1),e._v(" "),a("el-col",{attrs:{span:2}})],1)]),e._v(" "),a("el-col",{attrs:{"ors:xs":"24",sm:20,md:12,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-col",{attrs:{xs:4,sm:4,md:6,lg:4,xl:4}},[a("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[e._v("手机号码：")])]),e._v(" "),a("el-col",{attrs:{xs:18,sm:20,md:12,lg:16,xl:16}},[a("el-input",{attrs:{size:"small",maxlength:"11",placeholder:"请输入查询的手机号码"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"marginTop"},[a("el-col",{attrs:{"ors:xs":"24",sm:20,md:12,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-col",{attrs:{xs:4,sm:4,md:6,lg:4,xl:4}},[a("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[e._v("操作类型：")])]),e._v(" "),a("el-col",{attrs:{xs:18,sm:20,md:12,lg:16,xl:16}},[a("el-radio",{attrs:{label:"1,2,3,4"},model:{value:e.optype,callback:function(t){e.optype=t},expression:"optype"}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.optype,callback:function(t){e.optype=t},expression:"optype"}},[e._v("初始化")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.optype,callback:function(t){e.optype=t},expression:"optype"}},[e._v("上架")]),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:e.optype,callback:function(t){e.optype=t},expression:"optype"}},[e._v("下架")]),e._v(" "),a("el-radio",{attrs:{label:"4"},model:{value:e.optype,callback:function(t){e.optype=t},expression:"optype"}},[e._v("已卖")])],1)],1)]),e._v(" "),a("el-col",{attrs:{"ors:xs":"24",sm:20,md:12,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-col",{attrs:{xs:4,sm:4,md:6,lg:4,xl:4}},[a("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[e._v("操作结果：")])]),e._v(" "),a("el-col",{attrs:{xs:18,sm:20,md:12,lg:16,xl:16}},[a("el-radio",{attrs:{label:"1,2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("成功")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("失败")])],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"marginTop",staticStyle:{"text-align":"center"}},[a("button",{staticClass:"m-btn-orange",on:{click:function(t){e.search()}}},[e._v("搜索")])])],1),e._v(" "),e.searchResult?a("div",[a("div",[a("div",{staticClass:"m-listTitleFoot"},[a("h3",[e._v("日志列表"),a("span",{staticClass:"f-fw greyFont"},[e._v("("+e._s(e.form.page||"0")+")")])])]),e._v(" "),a("div",{staticClass:"m-details"},[a("table",{staticClass:"m-searchTab",staticStyle:{width:"100%",height:"100%"}},[e._m(0),e._v(" "),e._l(e.searchResult,function(t,l){return a("tr",{key:l},[a("td",[e._v("\n                              "+e._s(15*(e.pa-1)+(l+1))+"\n                          ")]),e._v(" "),a("td",[e._v("\n                              "+e._s(t.productName)+"\n                          ")]),e._v(" "),a("td",[t.modifyTime?a("span",[e._v("\n                                  "+e._s(e.getDateTime(t.modifyTime)[6])+"\n                              ")]):e._e(),e._v(" "),t.modifyTime?e._e():a("span",[e._v("\n                                  --\n                              ")])]),e._v(" "),a("td",[e._v("\n                              "+e._s(t.operatorName)+"\n                          ")]),e._v(" "),a("td",[e._v("\n                              "+e._s(t.operatorPhone)+"\n                          ")]),e._v(" "),a("td",[1==t.productState?a("span",[e._v("初始化")]):e._e(),e._v(" "),2==t.productState?a("span",[e._v("上架")]):e._e(),e._v(" "),3==t.productState?a("span",[e._v("下架")]):e._e(),e._v(" "),4==t.productState?a("span",[e._v("已卖")]):e._e()]),e._v(" "),a("td",[1==t.recordResult?a("span",[e._v("成功")]):e._e(),e._v(" "),2==t.recordResult?a("span",[e._v("失败")]):e._e()]),e._v(" "),a("td",[a("a",{staticClass:"f-td-underline",attrs:{href:"javascript:void(0)"},on:{click:function(a){e.openDetails(t)}}},[e._v("查看详情")])])])}),e._v(" "),e.searchResult.length<=0?a("tr",[a("td",{attrs:{colspan:"8"}},[e._v("\n                              暂无数据                                                        \n                          ")])]):e._e()],2)]),e._v(" "),e.searchResult.length>0?a("div",{staticClass:"m-listTitleFoot"},[a("el-row",[a("el-col",{attrs:{"ors:xs":"24",sm:20,md:12,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":15,"current-page":e.currentPage,total:e.form.page},on:{"current-change":e.search,"update:currentPage":function(t){e.currentPage=t}}})],1)])],1)],1):e._e()])]):e._e(),e._v(" "),e.off.logDet?a("log-details",{attrs:{detailsData:e.detailsList,layerType:e.openLayer}}):e._e()],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{staticClass:"f-s-14"},[a("td",[e._v("序号")]),e._v(" "),a("td",[e._v("号包名称")]),e._v(" "),a("td",[e._v("操作时间")]),e._v(" "),a("td",[e._v("操作人")]),e._v(" "),a("td",[e._v("手机号码")]),e._v(" "),a("td",[e._v("操作类型")]),e._v(" "),a("td",[e._v("操作结果")]),e._v(" "),a("td",[e._v("操作")])])}],c={render:n,staticRenderFns:o},d=c,p=a("Z0/y"),m=p(i,d,!1,null,null,null);t.default=m.exports}});