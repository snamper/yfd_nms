webpackJsonp([7],{Q5Q2:function(t,e,s){e=t.exports=s("UTlt")(!1),e.push([t.i,"\n.listTitleFoot[data-v-04ca81ae]{width: 96%;margin: 10px 18px;\n}\n",""])},TUXM:function(t,e,s){var a=s("Q5Q2");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("FIqI")("679eb882",a,!0,{})},Zrfe:function(t,e,s){e=t.exports=s("UTlt")(!1),e.push([t.i,"\ndiv.yfd[data-v-1ff87d8e]{width: 100% ;height: 100%\n}\n.listTitleFoot[data-v-1ff87d8e]{width: 96%;margin: 10px 38px;\n}\n.listTitleFoot label[data-v-1ff87d8e]{display:block;width: 50%;\n}\nlabel.el-checkbox[data-v-1ff87d8e]{display: inline\n}\n.detailsUlDiv[data-v-1ff87d8e]{width: 90%;height: 90%;margin-left:40px;\n}\n.detailsUlDiv ul[data-v-1ff87d8e]{border-left: 1px solid #ccc;border-right: 1px solid #ccc;border-top: 1px solid #ccc\n}\n.detailsUlDiv ul li[data-v-1ff87d8e] {padding: 6px 18px;border-bottom: 1px solid #ccc\n}\n.detailsUlDiv ul li[data-v-1ff87d8e]:nth-child(even){background: #ccc;\n}\ninput.modifyInput[data-v-1ff87d8e]{height: 28px;border-radius: 6px;outline: none;border: 1px solid #ccc;padding-left: 10px;\n}    \n",""])},s6Ha:function(t,e,s){"use strict";function a(t){s("uj6f")}function r(t){s("TUXM")}Object.defineProperty(e,"__esModule",{value:!0});var n=s("vHnB"),l=s.n(n),o=s("04Cm"),i=s("R2SV"),c={text:"正在加载"},d={props:{forms:Object},data:function(){return{user:"",company:"",headerUser:"",name:"",phone:"",radio:"1",checked:!0,checked2:!0,reason:"",item:"",searchData:"",ix:[{color:"red",age:18,sex:"girl"},{color:"red",age:18,sex:"girl"},{color:"red",age:18,sex:"girl"},{color:"red",age:18,sex:"girl"}],off:{showSearch:"",addList:"",modify:!1,noModify:!0},form:{name:"张三",phone:"15666666666"},list:[{a:"",b:"",checked:!1,checked2:!0},{a:"",b:"",checked:!0,checked2:!1}]}},components:{},created:function(){var t=this,e=Object(i.getStore)("YFD_NMS_INFO");t.user=e,t.searchData=t.$parent.searchData,t.company=t.$parent.StaffdepartName},methods:{goBack:function(){var t=this;this.$parent.off.staffDetails=!1,this.$parent.off.searchStaff=!0,this.$parent.search(t.$parent.pa)},checkBtn:function(){var t=this;t.off.noModify=!1,t.off.modify=!0,t.oldName=t.forms.username,t.oldPhone=t.forms.phone},checkNo:function(){var t=this;t.off.noModify=!0,t.off.modify=!1,t.forms.username=t.oldName,t.forms.phone=t.oldPhone},checkYes:function(t){var e=this,s=this,a="",r={};s.off.noModify=!0,s.off.modify=!1,a="/yfd-ums/w/user/updateUserDetail",r.newUsername=s.forms.username,r.newPhone=s.forms.phone,r.searchUserId=s.$parent.searchUserId,Object(o.requestMethod)(r,a).then(function(t){if(200==t.code){layer.open({content:"请求成功",skin:"msg",time:2,msgSkin:"success"});var a="",r=e,n=l.a.service(c);a=r.$parent.searchDetailsYfdData,Object(o.requestMethod)(a,"/yfd-ums/w/user/getUserDetail").then(function(t){r.off.searchStaff=!1,r.off.staffDetails=!0,200==t.code&&(r.$parent.searchRes=t.data)}).then(function(){n.close()}).catch(function(t){return Object(i.errorDeal)(t)})}else s.forms.username=s.oldName,s.forms.phone=s.oldPhone,layer.open({content:t.msg,skin:"msg",time:2,msgSkin:"error"})}).catch(function(t){return Object(i.errorDeal)(t)})},toMap:function(){var t=document.documentElement.clientWidth,e="",s=this,a=parseFloat(s.forms.latitude),r=parseFloat(s.forms.longitude);e=t<640?"http://map.baidu.com/mobile/?latlng="+a+","+r:"http://map.baidu.com/?latlng="+a+","+r,window.open(e)}}},p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"yfd"},[s("el-container",[s("header",{staticClass:"borderBottom"},[s("el-row",[s("el-col",{attrs:{span:9}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("公司名称 : "),s("span",{staticClass:"c-blue"},[t._v(" "+t._s(t.company))])])]),t._v(" "),s("el-col",{attrs:{span:5}},[s("div",{staticClass:"grid-content bg-purple-light"},[t._v("联系人 : "),s("span",[t._v(" "+t._s(t.forms.username))])])]),t._v(" "),s("el-col",{attrs:{span:5}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("手机号码 : "),s("span",[t._v(t._s(t.forms.phone))])])]),t._v(" "),s("el-col",{attrs:{span:5}},[s("div",{staticClass:"grid-content bg-purple-light fr"},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.goBack()}}},[t._v("返回列表")])])])],1)],1)])],1),t._v(" "),s("div",{staticClass:"listTitleFoot"},[s("el-row",[s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("员工列表")])])],1)],1),t._v(" "),s("div",{staticClass:"detailsUlDiv"},[s("ul",[s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("用户姓名:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t.off.noModify?s("p",[t._v(t._s(t.forms.username))]):t._e(),t._v(" "),t.off.modify?s("input",{directives:[{name:"model",rawName:"v-model",value:t.forms.username,expression:"forms.username"}],staticClass:"modifyInput",attrs:{type:"text"},domProps:{value:t.forms.username},on:{input:function(e){e.target.composing||t.$set(t.forms,"username",e.target.value)}}}):t._e()])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("手机号码:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t.off.noModify?s("p",[t._v(t._s(t.forms.phone))]):t._e(),t._v(" "),t.off.modify?s("input",{directives:[{name:"model",rawName:"v-model",value:t.forms.phone,expression:"forms.phone"}],staticClass:"modifyInput",attrs:{type:"text"},domProps:{value:t.forms.phone},on:{input:function(e){e.target.composing||t.$set(t.forms,"phone",e.target.value)}}}):t._e()])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("创建时间:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t._v(t._s(new Date(t.forms.createTime).toLocaleString()))])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("修改时间:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t._v(t._s(new Date(t.forms.modifyTime).toLocaleString()))])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("操作人:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t._v(t._s(t.forms.operatorName))])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("职务:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},t._l(t.forms.userRole,function(e,a){return s("span",{key:a},[1==e?s("span",[t._v("管理员")]):t._e(),t._v(" "),2==e?s("span",[t._v("销售")]):t._e(),t._v(" "),3==e?s("span",[t._v("店长")]):t._e(),t._v(" "),4==e?s("span",[t._v("采购员")]):t._e(),t._v(" "),5==e?s("span",[t._v("业务员")]):t._e()])}))])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("当前状态:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[1==t.forms.userState?s("span",[t._v("正常")]):t._e(),t._v(" "),2==t.forms.userState?s("span",[t._v("黑名单")]):t._e(),t._v(" "),3==t.forms.userState?s("span",[t._v("注销")]):t._e()])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("最后登陆时间:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t._v(t._s(new Date(t.forms.lastLoginTime).toLocaleString()))])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("登陆方式:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[1==t.forms.sessionPlatform?s("span",[t._v("Web在线")]):t._e(),2==t.forms.sessionPlatform?s("span",[t._v("App在线")]):t._e()])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("在线平台:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[1==t.forms.sessionType?s("span",[t._v("业务平台")]):t._e(),2==t.forms.sessionType?s("span",[t._v("管理平台")]):t._e()])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("IP:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"})])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("登陆地址:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t._v("\n                            "+t._s(t.forms.latitude)+"--"+t._s(t.forms.longitude)+"\n                            "),s("a",{attrs:{href:"javascript:void(0)"},on:{click:t.toMap}},[t._v("查看地图")])])])],1)],1),t._v(" "),s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("操作机型:")])]),t._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple-light"},[t._v(t._s(t.forms.phoneType))])])],1)],1)]),t._v(" "),s("div",{staticClass:"mt8"},[t.off.noModify?s("el-row",[s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[s("div",{staticClass:"grid-content bg-purple"},[2!=t.user.userRole&&3!=t.user.userRole?s("el-button",{attrs:{type:"success"},on:{click:function(e){t.checkBtn()}}},[t._v("修改")]):t._e()],1)])],1):t._e(),t._v(" "),t.off.modify?s("el-row",[s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-button",{attrs:{type:"danger"},on:{click:function(e){t.checkNo()}}},[t._v("取消")]),s("el-button",{attrs:{type:"success"},on:{click:function(e){t.checkYes(t.forms.userId)}}},[t._v("确定")])],1)])],1):t._e()],1)])])},v=[],f={render:p,staticRenderFns:v},u=f,_=s("Z0/y"),g=a,m=_(d,u,!1,g,"data-v-1ff87d8e",null),h=m.exports,b={text:"正在加载"},x={data:function(){return{currentPage:0,detailsList:"",name:"",phone:"",radio:"1,2",pa:"",searchData:"",searchDetailsYfdData:"",searchUserId:"",searchRes:"",StaffdepartName:"",off:{showSearch:"",searchList:!1,staffDetails:!1,searchStaff:!0},form:{page:1}}},components:{dlsStaff:h},created:function(){},methods:{search:function(t){var e=l.a.service(b),s={},a=this;a.pa=t||1,a.currentPage=t||1,s={username:a.name,phone:a.phone,userState:a.radio,pageSize:10,pageNum:t||1},Object(o.requestMethod)(s,"/yfd-ums/w/user/userSearch").then(function(t){200==t.code?(a.off.searchList=!0,a.form.page=t.data.total,a.detailsList=t.data.users):layer.open({content:t.msg,skin:"msg",time:2,msgSkin:"error"})}).then(function(){e.close()}).catch(function(t){return Object(i.errorDeal)(t)},e.close())},getDetails:function(t){},getStaffDetails:function(t){var e={},s=this,a=l.a.service(b);e={searchUserId:t.userId,sessionType:"2"},s.searchUserId=t.userId,s.searchDetailsYfdData=e,s.StaffdepartName=t.departName,Object(o.requestMethod)(e,"/yfd-ums/w/user/getUserDetail").then(function(t){s.off.searchStaff=!1,s.off.staffDetails=!0,200==t.code&&(s.searchRes=t.data)}).then(function(){a.close()}).catch(function(t){return Object(i.errorDeal)(t)})}}},C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.off.searchStaff?s("div",[s("div",{staticClass:"ygcx greyFont"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content bg-purple-dark searchTitleStyle black"},[t._v("搜索条件")])])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{xs:4,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-dark textR inputTitle"},[t._v("联系人：")])]),t._v(" "),s("el-col",{attrs:{xs:20,sm:12,md:12,lg:16,xl:16}},[s("el-input",{attrs:{maxlength:10,size:"small",placeholder:"请输入查询的联系人姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{xs:4,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-dark textR inputTitle"},[t._v("手机号码：")])]),t._v(" "),s("el-col",{attrs:{xs:20,sm:12,md:12,lg:16,xl:16}},[s("el-input",{attrs:{maxlength:11,size:"small",placeholder:"请输入查询的手机号码"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1)])],1),t._v(" "),s("el-row",{staticClass:"marginTop"},[s("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{xs:4,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-dark textR inputTitle"},[t._v("当前状态：")])]),t._v(" "),s("el-col",{attrs:{xs:20,sm:18,md:12,lg:16,xl:16}},[s("el-radio",{attrs:{label:"1,2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("全部")]),t._v(" "),s("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("正常")]),t._v(" "),s("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("黑名单")])],1)],1)])],1),t._v(" "),s("el-row",{staticClass:"marginTop",staticStyle:{"text-align":"center"}},[s("button",{staticClass:"searchBtn",on:{click:function(e){t.search()}}},[t._v("搜索")])])],1),t._v(" "),t.detailsList?s("div",[t.detailsList.length>0?s("div",[s("div",{staticClass:"listTitleFoot"},[s("el-row",[s("el-col",{attrs:{span:20}},[s("div",{staticClass:"grid-content bg-purple"},[t._v("员工列表"),t.form.page?s("span",{staticClass:"greyFont fontWeight"},[t._v(" ("+t._s(t.form.page)+")")]):t._e()])])],1)],1),t._v(" "),s("div",{staticClass:"detailsListDiv"},[s("table",{staticClass:"searchTab",staticStyle:{width:"100%",height:"100%"}},[t._m(0),t._v(" "),t._l(t.detailsList,function(e,a){return s("tr",{key:a,class:{greyFont:3==e.departState}},[s("td",[t._v("\n                          "+t._s(10*(t.pa-1)+(a+1))+"\n                      ")]),t._v(" "),s("td",[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){t.getStaffDetails(e)}}},[t._v(t._s(e.username))])]),t._v(" "),s("td",[t._v("\n                      "+t._s(e.phone)+"\n                      ")]),t._v(" "),s("td",[t._v("\n                      "+t._s(new Date(e.createTime).toLocaleString())+"\n                      ")]),t._v(" "),s("td",t._l(e.userRole,function(e,a){return s("span",{key:a},[1==e?s("span",[t._v("管理员")]):t._e(),t._v(" "),2==e?s("span",[t._v("销售")]):t._e(),t._v(" "),3==e?s("span",[t._v("店长")]):t._e(),t._v(" "),4==e?s("span",[t._v("采购员")]):t._e(),t._v(" "),5==e?s("span",[t._v("业务员")]):t._e()])})),t._v(" "),s("td",[1==e.userState?s("span",[t._v("正常")]):t._e(),t._v(" "),2==e.userState?s("span",[t._v("黑名单")]):t._e(),t._v(" "),3==e.userState?s("span",[t._v("注销")]):t._e()]),t._v(" "),s("td",[t._v("\n                      "+t._s(new Date(e.lastLoginTime).toLocaleString())+"\n                      ")])])})],2)]),t._v(" "),s("div",{staticClass:"listTitleFoot"},[s("el-row",[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":10,"current-page":t.currentPage,total:t.form.page},on:{"current-change":t.search,"update:currentPage":function(e){t.currentPage=e}}})],1)])],1)],1)]):t._e(),t._v(" "),0==t.detailsList.length?s("div",{staticClass:"searchResultInfoNone"},[t._v("\n        查询结果为空!\n      ")]):t._e()]):t._e()]):t._e(),t._v(" "),t.off.staffDetails?s("dlsStaff",{attrs:{forms:t.searchRes}}):t._e()],1)},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",[t._v("序号")]),t._v(" "),s("td",[t._v("用户姓名")]),t._v(" "),s("td",[t._v("手机号码")]),t._v(" "),s("td",[t._v("创建时间")]),t._v(" "),s("td",[t._v("职务")]),t._v(" "),s("td",[t._v("当前状态")]),t._v(" "),s("td",[t._v("最后登录时间")])])}],w={render:C,staticRenderFns:y},k=w,S=s("Z0/y"),D=r,T=S(x,k,!1,D,"data-v-04ca81ae",null);e.default=T.exports},uj6f:function(t,e,s){var a=s("Zrfe");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("FIqI")("76043c9b",a,!0,{})}});