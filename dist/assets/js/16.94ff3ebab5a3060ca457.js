webpackJsonp([16],{kGIB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("4YfN"),r=a.n(s),l=a("04Cm"),n=a("R2SV"),i=a("GN9a"),o=a("9rMa"),c={data:function(){return{currentPage:0,detailsList:"",name:"",phone:"",radio:"1,2,3,4",pa:"",searchData:"",searchDetailsYfdData:"",searchUserId:"",searchRes:"",StaffdepartName:"",off:{showSearch:"",searchList:!1,staffDetails:!1,searchStaff:!0},form:{page:1}}},components:{staffDetails:i.a},computed:r()({},Object(o.mapState)(["rolelist1","rolelist"])),methods:{search:function(t){var e=this;""!=this.phone&&Object(n.checkMobile)(this.phone,function(){return e.off.searchList=!1,e.form.page="",e.detailsList="",!1});var a={};e.pa=t||1,e.currentPage=t||1,a={username:e.name,phone:e.phone,userState:e.radio,pageSize:15,pageNum:t||1},Object(l.requestMethod)(a,"/ums/w/user/userSearch").then(function(t){200==t.code?(e.off.searchList=!0,e.form.page=t.data.total,e.detailsList=t.data.users):(e.off.searchList=!1,e.form.page="",e.detailsList="",layer.open({content:t.msg,skin:"msg",time:2,msgSkin:"error"}))}).catch(function(t){return Object(n.errorDeal)(t,function(){e.off.searchList=!1,e.form.page="",e.detailsList=""})})},getStaffDetails:function(t){var e={},a=this;e={searchUserId:t.userId,sessionType:"2"},a.searchUserId=t.userId,a.searchDetailsYfdData=e,a.StaffdepartName=t.departName,Object(l.requestMethod)(e,"/ums/w/user/getUserDetail").then(function(t){a.off.searchStaff=!1,a.off.staffDetails=!0,200==t.code&&(a.searchRes=t.data)}).catch(function(t){return Object(n.errorDeal)(t)})},getDateTime:function(t){return Object(n.getDateTime)(t)},translateData:function(t,e){return Object(n.translateData)(t,e)},translateRole:function(t,e){return Object(n.translateRole)(t,e)}}},d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.off.searchStaff?s("div",[s("div",{staticClass:"ygcx greyFont"},[s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content bg-purple-dark m-search-title black"},[t._v("搜索条件")])])],1),t._v(" "),s("el-row",[s("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{xs:5,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[t._v("联系人：")])]),t._v(" "),s("el-col",{attrs:{xs:19,sm:12,md:12,lg:16,xl:16}},[s("el-input",{attrs:{maxlength:10,size:"small",placeholder:"请输入查询的联系人姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{xs:5,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[t._v("手机号码：")])]),t._v(" "),s("el-col",{attrs:{xs:19,sm:12,md:12,lg:16,xl:16}},[s("el-input",{attrs:{maxlength:11,size:"small",placeholder:"请输入查询的手机号码"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1)])],1),t._v(" "),s("el-row",{staticClass:"marginTop"},[s("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{xs:5,sm:6,md:6,lg:4,xl:4}},[s("div",{staticClass:"grid-content bg-purple-dark f-ta-r inputTitle"},[t._v("当前状态：")])]),t._v(" "),s("el-col",{attrs:{xs:19,sm:18,md:12,lg:16,xl:16}},[s("el-radio",{attrs:{label:"1,2,3,4"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("全部")]),t._v(" "),s("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("正常")]),t._v(" "),s("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("黑名单")]),t._v(" "),s("el-radio",{attrs:{label:"3,4"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("注销")])],1)],1)])],1),t._v(" "),s("el-row",{staticClass:"marginTop",staticStyle:{"text-align":"center"}},[s("button",{staticClass:"m-btn-orange",on:{click:function(e){t.search()}}},[t._v("搜索")])])],1),t._v(" "),t.detailsList?s("div",[s("div",[s("div",{staticClass:"m-listTitleFoot"},[s("el-row",[s("p"),s("h3",[t._v("员工列表"),s("span",{staticClass:"f-fw greyFont"},[t._v("("+t._s(t.form.page||"0")+")")])]),s("p")])],1),t._v(" "),s("div",{staticClass:"m-details"},[s("table",{staticClass:"m-searchTab",staticStyle:{width:"100%",height:"100%"}},[t._m(0),t._v(" "),t._l(t.detailsList,function(e,r){return s("tr",{key:r,class:{greyFont:3==e.departState}},[s("td",[t._v("\n                          "+t._s(15*(t.pa-1)+(r+1))+"\n                      ")]),t._v(" "),s("td",[t._v(" ")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("p",{staticStyle:{float:"left","margin-left":"36%"}},[s("span",[t._l(e.userRole,function(e,r){return s("span",{key:r},[3==e?s("img",{staticClass:"m-adminIcon",attrs:{src:a("iXw6")}}):t._e()])}),t._v("\n                                  "+t._s(e.username)+"\n                              ")],2)])]),t._v(" "),s("td",[s("a",{on:{click:function(a){t.getStaffDetails(e)}}},[t._v(t._s(e.phone))])]),t._v(" "),s("td",[e.createTime?s("span",[t._v("\n                              "+t._s(t.getDateTime(e.createTime)[6])+"\n                          ")]):t._e(),t._v(" "),e.createTime?t._e():s("span",[t._v("\n                              --\n                          ")])]),t._v(" "),s("td",t._l(e.userRole.split(","),function(a,r){return s("span",[t._v("\n                              "+t._s(t.translateRole(a,t.rolelist))+" "),e.userRole.split(",").length-1>r?s("span",[t._v(",")]):t._e()])})),t._v(" "),s("td",[s("span",{class:1==e.userState?"green":2==e.userState?"red":3==e.userState||4==e.userState?"grey":"--"},[t._v(t._s(t.translateData("userState",e.userState)))])]),t._v(" "),s("td",[e.lastLoginTime?s("span",[t._v("\n                              "+t._s(t.getDateTime(e.lastLoginTime)[6])+"\n                          ")]):t._e(),t._v(" "),e.lastLoginTime?t._e():s("span",[t._v("\n                              --\n                          ")])])])}),t._v(" "),t.detailsList.length<=0?s("tr",[s("td",{staticClass:"f-ta-c",attrs:{colspan:"8"}},[t._v("\n                          暂无数据                                                        \n                      ")])]):t._e()],2)]),t._v(" "),t.detailsList.length>0?s("div",{staticClass:"m-listTitleFoot"},[s("el-row",[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":15,"current-page":t.currentPage,total:t.form.page},on:{"current-change":t.search,"update:currentPage":function(e){t.currentPage=e}}})],1)])],1)],1):t._e()])]):t._e()]):t._e(),t._v(" "),t.off.staffDetails?s("staffDetails",{attrs:{forms:t.searchRes}}):t._e()],1)},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v("序号")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[a("p",{staticStyle:{float:"left","margin-left":"36%"}},[t._v("用户姓名")])]),t._v(" "),a("td",[t._v("手机号码")]),t._v(" "),a("td",[t._v("创建时间")]),t._v(" "),a("td",[t._v("角色")]),t._v(" "),a("td",[t._v("当前状态")]),t._v(" "),a("td",[t._v("最后登录时间")])])}],f={render:d,staticRenderFns:u},v=f,_=a("Z0/y"),p=_(c,v,!1,null,null,null);e.default=p.exports}});